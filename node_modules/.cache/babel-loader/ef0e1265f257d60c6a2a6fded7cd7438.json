{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FIN 6392 G3 P2 Workspace\\\\3x3-monte-dapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState,useEffect,useContext}from\"react\";import{GlobalState}from\"../../../../../global_states/global_state\";import{ethers}from\"ethers\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function Buy(){var _useContext=useContext(GlobalState),currentUserInfo=_useContext.currentUserInfo,setCurrentUserInfo=_useContext.setCurrentUserInfo,currentGameInfo=_useContext.currentGameInfo,setGameInfo=_useContext.setGameInfo,accReqPending=_useContext.accReqPending,setAccReqPending=_useContext.setAccReqPending;var _useState=useState({inputValue:\"\"}),_useState2=_slicedToArray(_useState,2),value=_useState2[0],setValue=_useState2[1];var provider=currentUserInfo.provider;var updateBalance=currentUserInfo.updateBalance;var signer=currentUserInfo.signer;var signerAddress=currentUserInfo.signerAddress;var contractAddress=currentUserInfo.contractAddress;var erc20=currentUserInfo.erc20;useEffect(function(){var value=value;},[value.inputValue]);var updateValue=function updateValue(e){setValue(function(prev){return _objectSpread(_objectSpread({},prev),{},{inputValue:e.target.value});});};var placeOrder=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var buySize;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();buySize=value.inputValue;console.log(buySize);_context.next=5;return erc20.connect(signer).exchange({value:ethers.utils.parseEther(String(buySize/5000))}).catch(function(e){return e.code==\"INSUFFICIENT_FUNDS\"?alert(\"MetaMask says: INSUFFICENT FUNDS\"):alert(e);});case 5:setCurrentUserInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{updateBalance:updateBalance+1});});case 6:case\"end\":return _context.stop();}}},_callee);}));return function placeOrder(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"0.1 ETH = 500 BVJM\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:placeOrder,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"enter here to buy\",value:value.inputValue,onChange:updateValue}),/*#__PURE__*/_jsx(\"button\",{onClick:placeOrder,children:\"Buy\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Estimated total: \",value.inputValue/5000,\" ETH\"]})]});}","map":{"version":3,"sources":["C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/buy.js"],"names":["useState","useEffect","useContext","GlobalState","ethers","Buy","currentUserInfo","setCurrentUserInfo","currentGameInfo","setGameInfo","accReqPending","setAccReqPending","inputValue","value","setValue","provider","updateBalance","signer","signerAddress","contractAddress","erc20","updateValue","e","prev","target","placeOrder","preventDefault","buySize","console","log","connect","exchange","utils","parseEther","String","catch","code","alert"],"mappings":"omBAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,UAA9B,KAAgD,OAAhD,CACA,OAASC,WAAT,KAA4B,2CAA5B,CACA,OAASC,MAAT,KAAuB,QAAvB,C,6IAEA,MAAO,SAASC,CAAAA,GAAT,EAAe,CAClB,gBAA+GH,UAAU,CAACC,WAAD,CAAzH,CAAQG,eAAR,aAAQA,eAAR,CAAyBC,kBAAzB,aAAyBA,kBAAzB,CAA6CC,eAA7C,aAA6CA,eAA7C,CAA8DC,WAA9D,aAA8DA,WAA9D,CAA2EC,aAA3E,aAA2EA,aAA3E,CAA0FC,gBAA1F,aAA0FA,gBAA1F,CACA,cAA0BX,QAAQ,CAAC,CAACY,UAAU,CAAE,EAAb,CAAD,CAAlC,wCAAOC,KAAP,eAAcC,QAAd,eACA,GAAMC,CAAAA,QAAQ,CAAGT,eAAe,CAACS,QAAjC,CACA,GAAMC,CAAAA,aAAa,CAAGV,eAAe,CAACU,aAAtC,CACA,GAAMC,CAAAA,MAAM,CAAGX,eAAe,CAACW,MAA/B,CACA,GAAMC,CAAAA,aAAa,CAAGZ,eAAe,CAACY,aAAtC,CACA,GAAMC,CAAAA,eAAe,CAAGb,eAAe,CAACa,eAAxC,CACA,GAAMC,CAAAA,KAAK,CAAGd,eAAe,CAACc,KAA9B,CAEAnB,SAAS,CAAC,UAAM,CACZ,GAAIY,CAAAA,KAAK,CAAGA,KAAZ,CACH,CAFQ,CAEP,CAACA,KAAK,CAACD,UAAP,CAFO,CAAT,CAIA,GAAMS,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,CAAD,CAAO,CACvBR,QAAQ,CAAC,SAAAS,IAAI,CAAI,CACb,sCACOA,IADP,MAEIX,UAAU,CAAEU,CAAC,CAACE,MAAF,CAASX,KAFzB,GAIH,CALO,CAAR,CAMH,CAPD,CAWA,GAAMY,CAAAA,UAAU,0FAAG,iBAAOH,CAAP,8HACfA,CAAC,CAACI,cAAF,GACMC,OAFS,CAECd,KAAK,CAACD,UAFP,CAGfgB,OAAO,CAACC,GAAR,CAAYF,OAAZ,EAHe,sBAKTP,CAAAA,KAAK,CACNU,OADC,CACOb,MADP,EAEDc,QAFC,CAEQ,CAAClB,KAAK,CAAET,MAAM,CAAC4B,KAAP,CAAaC,UAAb,CAAwBC,MAAM,CAACP,OAAO,CAAC,IAAT,CAA9B,CAAR,CAFR,EAGDQ,KAHC,CAGK,SAAAb,CAAC,QAAIA,CAAAA,CAAC,CAACc,IAAF,EAAU,oBAAV,CAAiCC,KAAK,CAAC,kCAAD,CAAtC,CAA6EA,KAAK,CAACf,CAAD,CAAtF,EAHN,CALS,QAUff,kBAAkB,CAAC,SAAAgB,IAAI,CAAI,CACvB,sCACOA,IADP,MAEIP,aAAa,CAAEA,aAAa,CAAG,CAFnC,GAIH,CALiB,CAAlB,CAVe,sDAAH,kBAAVS,CAAAA,UAAU,4CAAhB,CAmBA,mBACI,wCACI,yCADJ,cAEI,cAAM,QAAQ,CAAEA,UAAhB,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,WAAW,CAAC,mBAA/B,CAAmD,KAAK,CAAEZ,KAAK,CAACD,UAAhE,CAA4E,QAAQ,CAAES,WAAtF,EADJ,cAEI,eAAQ,OAAO,CAAEI,UAAjB,iBAFJ,GAFJ,cAMI,yCAAqBZ,KAAK,CAACD,UAAN,CAAiB,IAAtC,UANJ,GADJ,CAUH","sourcesContent":["import { useState, useEffect, useContext } from \"react\"\r\nimport { GlobalState } from \"../../../../../global_states/global_state\";\r\nimport { ethers } from \"ethers\";\r\n\r\nexport function Buy() {\r\n    const { currentUserInfo, setCurrentUserInfo, currentGameInfo, setGameInfo, accReqPending, setAccReqPending } = useContext(GlobalState);\r\n    const [value, setValue] = useState({inputValue: \"\"});\r\n    const provider = currentUserInfo.provider;\r\n    const updateBalance = currentUserInfo.updateBalance;\r\n    const signer = currentUserInfo.signer;\r\n    const signerAddress = currentUserInfo.signerAddress;\r\n    const contractAddress = currentUserInfo.contractAddress;\r\n    const erc20 = currentUserInfo.erc20;\r\n    \r\n    useEffect(() => {\r\n        var value = value;\r\n    },[value.inputValue])\r\n\r\n    const updateValue = (e) => {\r\n        setValue(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    const placeOrder = async (e) => {\r\n        e.preventDefault();\r\n        const buySize = value.inputValue;\r\n        console.log(buySize);\r\n\r\n        await erc20\r\n            .connect(signer)\r\n            .exchange({value: ethers.utils.parseEther(String(buySize/5000))})\r\n            .catch(e => e.code == \"INSUFFICIENT_FUNDS\" ? alert(\"MetaMask says: INSUFFICENT FUNDS\") : alert(e));\r\n            \r\n        setCurrentUserInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                updateBalance: updateBalance + 1\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <p>0.1 ETH = 500 BVJM</p>\r\n            <form onSubmit={placeOrder}>\r\n                <input type=\"text\" placeholder=\"enter here to buy\" value={value.inputValue} onChange={updateValue}/>\r\n                <button onClick={placeOrder}>Buy</button>\r\n            </form>\r\n            <p>Estimated total: {value.inputValue/5000} ETH</p>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}