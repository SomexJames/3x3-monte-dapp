{"ast":null,"code":"import{useState,useEffect,useContext}from\"react\";import{GlobalState}from\"../../../../../global_states/global_state\";import{ethers}from\"ethers\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";export function Buy(){const{currentUserInfo,setCurrentUserInfo,currentGameInfo,setGameInfo,accReqPending,setAccReqPending}=useContext(GlobalState);const[value,setValue]=useState({inputValue:\"\"});const provider=currentUserInfo.provider;const updateBalance=currentUserInfo.updateBalance;const signer=currentUserInfo.signer;const signerAddress=currentUserInfo.signerAddress;const contractAddress=currentUserInfo.contractAddress;const erc20=currentUserInfo.erc20;useEffect(()=>{var value=value;},[value.inputValue]);const updateValue=e=>{setValue(prev=>{return{...prev,inputValue:e.target.value};});};const placeOrder=async e=>{e.preventDefault();const buySize=value.inputValue;await erc20.connect(signer).exchange({value:ethers.utils.parseEther(String(buySize/5000))}).catch(e=>e.code==\"INSUFFICIENT_FUNDS\"?alert(\"MetaMask says: INSUFFICENT FUNDS\"):alert(e));setCurrentUserInfo(prev=>{return{...prev,updateBalance:updateBalance+1};});};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"p\",{children:\"0.1 ETH = 500 KBUX\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:placeOrder,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"enter here to buy\",value:value.inputValue,onChange:updateValue}),/*#__PURE__*/_jsx(\"button\",{onClick:placeOrder,children:\"Buy\"})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Estimated total: \",value.inputValue/5000,\" ETH\"]})]});}","map":{"version":3,"names":["useState","useEffect","useContext","GlobalState","ethers","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Buy","currentUserInfo","setCurrentUserInfo","currentGameInfo","setGameInfo","accReqPending","setAccReqPending","value","setValue","inputValue","provider","updateBalance","signer","signerAddress","contractAddress","erc20","updateValue","e","prev","target","placeOrder","preventDefault","buySize","connect","exchange","utils","parseEther","String","catch","code","alert","children","onSubmit","type","placeholder","onChange","onClick"],"sources":["C:/Users/Brandon/Projects/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/buy.js"],"sourcesContent":["import { useState, useEffect, useContext } from \"react\"\r\nimport { GlobalState } from \"../../../../../global_states/global_state\";\r\nimport { ethers } from \"ethers\";\r\n\r\nexport function Buy() {\r\n    const { currentUserInfo, setCurrentUserInfo, currentGameInfo, setGameInfo, accReqPending, setAccReqPending } = useContext(GlobalState);\r\n    const [value, setValue] = useState({inputValue: \"\"});\r\n    const provider = currentUserInfo.provider;\r\n    const updateBalance = currentUserInfo.updateBalance;\r\n    const signer = currentUserInfo.signer;\r\n    const signerAddress = currentUserInfo.signerAddress;\r\n    const contractAddress = currentUserInfo.contractAddress;\r\n    const erc20 = currentUserInfo.erc20;\r\n    \r\n    useEffect(() => {\r\n        var value = value;\r\n    },[value.inputValue])\r\n\r\n    const updateValue = (e) => {\r\n        setValue(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    const placeOrder = async (e) => {\r\n        e.preventDefault();\r\n        const buySize = value.inputValue;\r\n\r\n        await erc20\r\n            .connect(signer)\r\n            .exchange({value: ethers.utils.parseEther(String(buySize/5000))})\r\n            .catch(e => e.code == \"INSUFFICIENT_FUNDS\" ? alert(\"MetaMask says: INSUFFICENT FUNDS\") : alert(e));\r\n            \r\n        setCurrentUserInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                updateBalance: updateBalance + 1\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <p>0.1 ETH = 500 KBUX</p>\r\n            <form onSubmit={placeOrder}>\r\n                <input type=\"text\" placeholder=\"enter here to buy\" value={value.inputValue} onChange={updateValue}/>\r\n                <button onClick={placeOrder}>Buy</button>\r\n            </form>\r\n            <p>Estimated total: {value.inputValue/5000} ETH</p>\r\n        </>\r\n    )\r\n}"],"mappings":"AAAA,OAASA,QAAQ,CAAEC,SAAS,CAAEC,UAAU,KAAQ,OAAO,CACvD,OAASC,WAAW,KAAQ,2CAA2C,CACvE,OAASC,MAAM,KAAQ,QAAQ,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,CAAAC,QAAA,IAAAC,SAAA,yBAEhC,MAAO,SAAS,CAAAC,GAAGA,CAAA,CAAG,CAClB,KAAM,CAAEC,eAAe,CAAEC,kBAAkB,CAAEC,eAAe,CAAEC,WAAW,CAAEC,aAAa,CAAEC,gBAAiB,CAAC,CAAGf,UAAU,CAACC,WAAW,CAAC,CACtI,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGnB,QAAQ,CAAC,CAACoB,UAAU,CAAE,EAAE,CAAC,CAAC,CACpD,KAAM,CAAAC,QAAQ,CAAGT,eAAe,CAACS,QAAQ,CACzC,KAAM,CAAAC,aAAa,CAAGV,eAAe,CAACU,aAAa,CACnD,KAAM,CAAAC,MAAM,CAAGX,eAAe,CAACW,MAAM,CACrC,KAAM,CAAAC,aAAa,CAAGZ,eAAe,CAACY,aAAa,CACnD,KAAM,CAAAC,eAAe,CAAGb,eAAe,CAACa,eAAe,CACvD,KAAM,CAAAC,KAAK,CAAGd,eAAe,CAACc,KAAK,CAEnCzB,SAAS,CAAC,IAAM,CACZ,GAAI,CAAAiB,KAAK,CAAGA,KAAK,CACrB,CAAC,CAAC,CAACA,KAAK,CAACE,UAAU,CAAC,CAAC,CAErB,KAAM,CAAAO,WAAW,CAAIC,CAAC,EAAK,CACvBT,QAAQ,CAACU,IAAI,EAAI,CACb,MAAO,CACH,GAAGA,IAAI,CACPT,UAAU,CAAEQ,CAAC,CAACE,MAAM,CAACZ,KACzB,CAAC,CACL,CAAC,CAAC,CACN,CAAC,CAID,KAAM,CAAAa,UAAU,CAAG,KAAO,CAAAH,CAAC,EAAK,CAC5BA,CAAC,CAACI,cAAc,CAAC,CAAC,CAClB,KAAM,CAAAC,OAAO,CAAGf,KAAK,CAACE,UAAU,CAEhC,KAAM,CAAAM,KAAK,CACNQ,OAAO,CAACX,MAAM,CAAC,CACfY,QAAQ,CAAC,CAACjB,KAAK,CAAEd,MAAM,CAACgC,KAAK,CAACC,UAAU,CAACC,MAAM,CAACL,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAChEM,KAAK,CAACX,CAAC,EAAIA,CAAC,CAACY,IAAI,EAAI,oBAAoB,CAAGC,KAAK,CAAC,kCAAkC,CAAC,CAAGA,KAAK,CAACb,CAAC,CAAC,CAAC,CAEtGf,kBAAkB,CAACgB,IAAI,EAAI,CACvB,MAAO,CACH,GAAGA,IAAI,CACPP,aAAa,CAAEA,aAAa,CAAG,CACnC,CAAC,CACL,CAAC,CAAC,CAEN,CAAC,CAED,mBACId,KAAA,CAAAE,SAAA,EAAAgC,QAAA,eACIpC,IAAA,MAAAoC,QAAA,CAAG,oBAAkB,CAAG,CAAC,cACzBlC,KAAA,SAAMmC,QAAQ,CAAEZ,UAAW,CAAAW,QAAA,eACvBpC,IAAA,UAAOsC,IAAI,CAAC,MAAM,CAACC,WAAW,CAAC,mBAAmB,CAAC3B,KAAK,CAAEA,KAAK,CAACE,UAAW,CAAC0B,QAAQ,CAAEnB,WAAY,CAAC,CAAC,cACpGrB,IAAA,WAAQyC,OAAO,CAAEhB,UAAW,CAAAW,QAAA,CAAC,KAAG,CAAQ,CAAC,EACvC,CAAC,cACPlC,KAAA,MAAAkC,QAAA,EAAG,mBAAiB,CAACxB,KAAK,CAACE,UAAU,CAAC,IAAI,CAAC,MAAI,EAAG,CAAC,EACrD,CAAC,CAEX","ignoreList":[]},"metadata":{},"sourceType":"module"}