{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Brandon/Projects/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/Brandon/Projects/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport _slicedToArray from \"C:/Users/Brandon/Projects/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Brandon\\\\Projects\\\\3x3-monte-dapp\\\\src\\\\components\\\\pages\\\\start_page_comp\\\\base_selector_comp\\\\game_selector_comp\\\\pregame_comp\\\\buy.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Brandon\\\\Projects\\\\3x3-monte-dapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport { useState, useEffect, useContext } from \"react\";\nimport { GlobalState } from \"../../../../../global_states/global_state\";\nimport { ethers } from \"ethers\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport function Buy() {\n  _s();\n\n  var _useContext = useContext(GlobalState),\n      currentUserInfo = _useContext.currentUserInfo,\n      setCurrentUserInfo = _useContext.setCurrentUserInfo,\n      currentGameInfo = _useContext.currentGameInfo,\n      setGameInfo = _useContext.setGameInfo,\n      accReqPending = _useContext.accReqPending,\n      setAccReqPending = _useContext.setAccReqPending;\n\n  var _useState = useState({\n    inputValue: \"\"\n  }),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n\n  var provider = currentUserInfo.provider;\n  var updateBalance = currentUserInfo.updateBalance;\n  var signer = currentUserInfo.signer;\n  var signerAddress = currentUserInfo.signerAddress;\n  var contractAddress = currentUserInfo.contractAddress;\n  var erc20 = currentUserInfo.erc20;\n  useEffect(function () {\n    var value = value;\n  }, [value.inputValue]);\n\n  var updateValue = function updateValue(e) {\n    setValue(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        inputValue: e.target.value\n      });\n    });\n  };\n\n  var placeOrder = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var buySize;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              buySize = value.inputValue;\n              _context.next = 4;\n              return erc20.connect(signer).exchange({\n                value: ethers.utils.parseEther(String(buySize / 5000))\n              }).catch(function (e) {\n                return e.code == \"INSUFFICIENT_FUNDS\" ? alert(\"MetaMask says: INSUFFICENT FUNDS\") : alert(e);\n              });\n\n            case 4:\n              setCurrentUserInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  updateBalance: updateBalance + 1\n                });\n              });\n\n            case 5:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function placeOrder(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"0.1 ETH = 500 KBUX\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: placeOrder,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"enter here to buy\",\n        value: value.inputValue,\n        onChange: updateValue\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: placeOrder,\n        children: \"Buy\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 51,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Estimated total: \", value.inputValue / 5000, \" ETH\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s(Buy, \"aZfdfdw6zwYf6ymdeoYAz+WW4hY=\");\n\n_c = Buy;\n\nvar _c;\n\n$RefreshReg$(_c, \"Buy\");","map":{"version":3,"sources":["C:/Users/Brandon/Projects/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/buy.js"],"names":["useState","useEffect","useContext","GlobalState","ethers","Buy","currentUserInfo","setCurrentUserInfo","currentGameInfo","setGameInfo","accReqPending","setAccReqPending","inputValue","value","setValue","provider","updateBalance","signer","signerAddress","contractAddress","erc20","updateValue","e","prev","target","placeOrder","preventDefault","buySize","connect","exchange","utils","parseEther","String","catch","code","alert"],"mappings":"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","sourcesContent":["import { useState, useEffect, useContext } from \"react\"\r\nimport { GlobalState } from \"../../../../../global_states/global_state\";\r\nimport { ethers } from \"ethers\";\r\n\r\nexport function Buy() {\r\n    const { currentUserInfo, setCurrentUserInfo, currentGameInfo, setGameInfo, accReqPending, setAccReqPending } = useContext(GlobalState);\r\n    const [value, setValue] = useState({inputValue: \"\"});\r\n    const provider = currentUserInfo.provider;\r\n    const updateBalance = currentUserInfo.updateBalance;\r\n    const signer = currentUserInfo.signer;\r\n    const signerAddress = currentUserInfo.signerAddress;\r\n    const contractAddress = currentUserInfo.contractAddress;\r\n    const erc20 = currentUserInfo.erc20;\r\n    \r\n    useEffect(() => {\r\n        var value = value;\r\n    },[value.inputValue])\r\n\r\n    const updateValue = (e) => {\r\n        setValue(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    \r\n\r\n    const placeOrder = async (e) => {\r\n        e.preventDefault();\r\n        const buySize = value.inputValue;\r\n\r\n        await erc20\r\n            .connect(signer)\r\n            .exchange({value: ethers.utils.parseEther(String(buySize/5000))})\r\n            .catch(e => e.code == \"INSUFFICIENT_FUNDS\" ? alert(\"MetaMask says: INSUFFICENT FUNDS\") : alert(e));\r\n            \r\n        setCurrentUserInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                updateBalance: updateBalance + 1\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    return (\r\n        <>\r\n            <p>0.1 ETH = 500 KBUX</p>\r\n            <form onSubmit={placeOrder}>\r\n                <input type=\"text\" placeholder=\"enter here to buy\" value={value.inputValue} onChange={updateValue}/>\r\n                <button onClick={placeOrder}>Buy</button>\r\n            </form>\r\n            <p>Estimated total: {value.inputValue/5000} ETH</p>\r\n        </>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}