{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FIN 6392 G3 P2 Workspace\\\\3x3-monte-dapp\\\\src\\\\components\\\\pages\\\\start_page_comp\\\\base_selector_comp\\\\game_selector_comp\\\\pregame_comp\\\\placeBet.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FIN 6392 G3 P2 Workspace\\\\3x3-monte-dapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport { useContext } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useEffect } from \"react\";\nimport { GlobalState } from \"../../../../../global_states/global_state\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function PlaceBet() {\n  _s();\n\n  var _useContext = useContext(GlobalState),\n      currentGameInfo = _useContext.currentGameInfo,\n      setGameInfo = _useContext.setGameInfo,\n      currentUserInfo = _useContext.currentUserInfo,\n      setCurrentUserInfo = _useContext.setCurrentUserInfo;\n\n  var signer = currentUserInfo.signer;\n  var signerAddress = currentUserInfo.signerAddress;\n  var erc20 = currentUserInfo.erc20;\n  var inputValue = currentGameInfo.inputValue;\n  var balance = currentUserInfo.balance;\n  var deck = currentGameInfo.deck;\n  var player = currentGameInfo.player;\n  var dealer = currentGameInfo.dealer;\n  var message = currentGameInfo.message;\n\n  var updateBet = function updateBet(e) {\n    setGameInfo(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        inputValue: e.target.value\n      });\n    });\n  };\n\n  var placeBet = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var newBalance, currentBet;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.next = 3;\n              return erc20.balanceOf(signerAddress);\n\n            case 3:\n              newBalance = _context.sent;\n              newBalance = String(newBalance);\n\n              if (newBalance != String(balance) || balance == \"-\") {\n                setCurrentUserInfo(function (prev) {\n                  return _objectSpread(_objectSpread({}, prev), {}, {\n                    balance: newBalance\n                  });\n                });\n              }\n\n              currentBet = currentGameInfo.inputValue;\n\n              if (!(currentBet % 10 != 0)) {\n                _context.next = 11;\n                break;\n              }\n\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  message: \"Must be divisble by 10\"\n                });\n              });\n              _context.next = 22;\n              break;\n\n            case 11:\n              if (!(currentBet > balance)) {\n                _context.next = 15;\n                break;\n              }\n\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  message: \"Not enough BVJM tokens\"\n                });\n              });\n              _context.next = 22;\n              break;\n\n            case 15:\n              if (!(currentBet === 0)) {\n                _context.next = 19;\n                break;\n              }\n\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  currentBet: \"freePlay\",\n                  level: 1,\n                  message: null\n                });\n              });\n              _context.next = 22;\n              break;\n\n            case 19:\n              _context.next = 21;\n              return erc20.connect(signer).transfer(\"0xa00D2f69DaAF2DA3d4F7b5967230e8D1D0631211\", ethers.utils.parseUnits(currentBet, 18));\n\n            case 21:\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  currentBet: currentBet / 10 - 1,\n                  level: 1,\n                  message: null\n                });\n              });\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function placeBet(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"input-bet\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: placeBet,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"enter here to deposit\",\n        value: inputValue,\n        onChange: updateBet\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: placeBet,\n        children: \"Insert Tokens\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PlaceBet, \"B6lauMKWl2wRf8t2lmSujro8+zE=\");\n\n_c = PlaceBet;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceBet\");","map":{"version":3,"sources":["C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/placeBet.js"],"names":["useContext","ethers","useEffect","GlobalState","PlaceBet","currentGameInfo","setGameInfo","currentUserInfo","setCurrentUserInfo","signer","signerAddress","erc20","inputValue","balance","deck","player","dealer","message","updateBet","e","prev","target","value","placeBet","preventDefault","balanceOf","newBalance","String","currentBet","level","connect","transfer","utils","parseUnits"],"mappings":"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","sourcesContent":["import { useContext } from \"react\"\r\nimport { ethers } from \"ethers\"\r\nimport { useEffect } from \"react\"\r\nimport { GlobalState } from \"../../../../../global_states/global_state\"\r\n\r\n\r\nexport function PlaceBet() {\r\n    const { currentGameInfo, setGameInfo, currentUserInfo, setCurrentUserInfo } = useContext(GlobalState);\r\n    const signer = currentUserInfo.signer;\r\n    const signerAddress = currentUserInfo.signerAddress;\r\n    const erc20 = currentUserInfo.erc20;\r\n    const inputValue = currentGameInfo.inputValue;\r\n    const balance = currentUserInfo.balance;\r\n    var deck = currentGameInfo.deck;\r\n    var player = currentGameInfo.player;\r\n    var dealer = currentGameInfo.dealer;\r\n    var message = currentGameInfo.message;\r\n    \r\n    const updateBet = e => {\r\n        setGameInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    const placeBet = async (e) => {\r\n        e.preventDefault();\r\n        let newBalance = await erc20.balanceOf(signerAddress);\r\n            newBalance = String(newBalance);\r\n            if (newBalance != String(balance) || balance == \"-\") {\r\n                setCurrentUserInfo(prev => {\r\n                    return {\r\n                        ...prev,\r\n                        balance: newBalance\r\n                    }\r\n                })\r\n            }\r\n        const currentBet = currentGameInfo.inputValue;\r\n        if (currentBet % 10 != 0) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Must be divisble by 10\"\r\n                }\r\n            })\r\n        } else if (currentBet > balance) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Not enough BVJM tokens\"\r\n                }\r\n            });\r\n        } else if (currentBet === 0) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: \"freePlay\",\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n        } else {\r\n            await erc20.connect(signer).transfer(\"0xa00D2f69DaAF2DA3d4F7b5967230e8D1D0631211\", ethers.utils.parseUnits(currentBet, 18));\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: currentBet/10 - 1,\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"input-bet\">\r\n            <form onSubmit={placeBet}>\r\n                <input type=\"text\" placeholder=\"enter here to deposit\" value={inputValue} onChange={updateBet}/>\r\n                <button onClick={placeBet}>Insert Tokens</button>\r\n            </form>\r\n            <p>{message}</p>\r\n        </div>\r\n        \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}