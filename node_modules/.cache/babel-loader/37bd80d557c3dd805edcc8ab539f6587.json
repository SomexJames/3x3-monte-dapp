{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _objectSpread from \"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FIN 6392 G3 P2 Workspace\\\\3x3-monte-dapp\\\\src\\\\components\\\\pages\\\\start_page_comp\\\\base_selector_comp\\\\game_selector_comp\\\\pregame_comp\\\\placeBet.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FIN 6392 G3 P2 Workspace\\\\3x3-monte-dapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport { useContext } from \"react\";\nimport { ethers } from \"ethers\";\nimport { useEffect } from \"react\";\nimport { GlobalState } from \"../../../../../global_states/global_state\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function PlaceBet() {\n  _s();\n\n  var _useContext = useContext(GlobalState),\n      currentGameInfo = _useContext.currentGameInfo,\n      setGameInfo = _useContext.setGameInfo,\n      currentUserInfo = _useContext.currentUserInfo;\n\n  var signer = currentUserInfo.signer;\n  var erc20 = currentUserInfo.erc20;\n  var inputValue = currentGameInfo.inputValue;\n  var balance = currentUserInfo.balance;\n  var deck = currentGameInfo.deck;\n  var player = currentGameInfo.player;\n  var dealer = currentGameInfo.dealer;\n  var message = currentGameInfo.message;\n\n  var updateBet = function updateBet(e) {\n    setGameInfo(function (prev) {\n      return _objectSpread(_objectSpread({}, prev), {}, {\n        inputValue: e.target.value\n      });\n    });\n  };\n\n  var placeBet = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var currentBet;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              currentBet = currentGameInfo.inputValue;\n\n              if (!(currentBet % 10 != 0)) {\n                _context.next = 6;\n                break;\n              }\n\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  message: \"Only whole number bets allowed\"\n                });\n              });\n              _context.next = 13;\n              break;\n\n            case 6:\n              if (!(currentBet > balance)) {\n                _context.next = 10;\n                break;\n              }\n\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  message: \"Not enough BVJM tokens\"\n                });\n              });\n              _context.next = 13;\n              break;\n\n            case 10:\n              _context.next = 12;\n              return erc20.connect(signer).transfer(\"0xa00D2f69DaAF2DA3d4F7b5967230e8D1D0631211\", ethers.utils.parseUnits(currentBet, 18));\n\n            case 12:\n              setGameInfo(function (prev) {\n                return _objectSpread(_objectSpread({}, prev), {}, {\n                  currentBet: currentBet / 10,\n                  level: 1,\n                  message: null\n                });\n              });\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function placeBet(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"input-bet\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: placeBet,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"enter here to deposit\",\n        value: inputValue,\n        onChange: updateBet\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: placeBet,\n        children: \"Insert Tokens\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PlaceBet, \"TwtkYe2KZMlhice/0B1n5OAT5aI=\");\n\n_c = PlaceBet;\n\nvar _c;\n\n$RefreshReg$(_c, \"PlaceBet\");","map":{"version":3,"sources":["C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/placeBet.js"],"names":["useContext","ethers","useEffect","GlobalState","PlaceBet","currentGameInfo","setGameInfo","currentUserInfo","signer","erc20","inputValue","balance","deck","player","dealer","message","updateBet","e","prev","target","value","placeBet","preventDefault","currentBet","connect","transfer","utils","parseUnits","level"],"mappings":"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","sourcesContent":["import { useContext } from \"react\";\r\nimport { ethers } from \"ethers\"\r\nimport { useEffect } from \"react\";\r\nimport { GlobalState } from \"../../../../../global_states/global_state\"\r\n\r\n\r\nexport function PlaceBet() {\r\n    const { currentGameInfo, setGameInfo, currentUserInfo } = useContext(GlobalState);\r\n    const signer = currentUserInfo.signer;\r\n    const erc20 = currentUserInfo.erc20;\r\n    const inputValue = currentGameInfo.inputValue;\r\n    const balance = currentUserInfo.balance;\r\n    var deck = currentGameInfo.deck;\r\n    var player = currentGameInfo.player;\r\n    var dealer = currentGameInfo.dealer;\r\n    var message = currentGameInfo.message;\r\n    \r\n    const updateBet = e => {\r\n        setGameInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    const placeBet = async (e) => {\r\n        e.preventDefault();\r\n        const currentBet = currentGameInfo.inputValue;\r\n        if (currentBet % 10 != 0) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Only whole number bets allowed\"\r\n                }\r\n            })\r\n        } else if (currentBet > balance) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Not enough BVJM tokens\"\r\n                }\r\n            });\r\n        } else {\r\n            await erc20.connect(signer).transfer(\"0xa00D2f69DaAF2DA3d4F7b5967230e8D1D0631211\", ethers.utils.parseUnits(currentBet, 18));\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: currentBet/10,\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"input-bet\">\r\n            <form onSubmit={placeBet}>\r\n                <input type=\"text\" placeholder=\"enter here to deposit\" value={inputValue} onChange={updateBet}/>\r\n                <button onClick={placeBet}>Insert Tokens</button>\r\n            </form>\r\n            <p>{message}</p>\r\n        </div>\r\n        \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}