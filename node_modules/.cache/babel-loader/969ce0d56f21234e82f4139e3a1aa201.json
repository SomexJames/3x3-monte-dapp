{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _objectSpread from\"C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FIN 6392 G3 P2 Workspace\\\\3x3-monte-dapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useContext}from\"react\";import{ethers}from\"ethers\";import{useEffect}from\"react\";import{GlobalState}from\"../../../../../global_states/global_state\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export function PlaceBet(){var _useContext=useContext(GlobalState),currentGameInfo=_useContext.currentGameInfo,setGameInfo=_useContext.setGameInfo,currentUserInfo=_useContext.currentUserInfo,setCurrentUserInfo=_useContext.setCurrentUserInfo;var signer=currentUserInfo.signer;var signerAddress=currentUserInfo.signerAddress;var erc20=currentUserInfo.erc20;var inputValue=currentGameInfo.inputValue;var balance=currentUserInfo.balance;var deck=currentGameInfo.deck;var player=currentGameInfo.player;var dealer=currentGameInfo.dealer;var message=currentGameInfo.message;var updateBet=function updateBet(e){setGameInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{inputValue:e.target.value});});};var placeBet=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newBalance,currentBet;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return erc20.balanceOf(signerAddress);case 3:newBalance=_context.sent;newBalance=String(newBalance);if(newBalance!=String(balance)||balance==\"-\"){setCurrentUserInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{balance:newBalance});});}currentBet=currentGameInfo.inputValue;if(!(currentBet%10!=0)){_context.next=11;break;}setGameInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{message:\"Must be divisble by 10\"});});_context.next=23;break;case 11:if(!(currentBet>balance)){_context.next=15;break;}setGameInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{message:\"Not enough BVJM tokens\"});});_context.next=23;break;case 15:if(!(currentBet==0)){_context.next=19;break;}setGameInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{currentBet:\"freePlay\",level:1,message:null});});_context.next=23;break;case 19:_context.next=21;return erc20.connect(signer).transfer(\"0xa00D2f69DaAF2DA3d4F7b5967230e8D1D0631211\",ethers.utils.parseUnits(currentBet,18));case 21:setGameInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{currentBet:currentBet/10-1,level:1,message:null});});setGameInfo(function(prev){return _objectSpread(_objectSpread({},prev),{},{inputValue:null});});case 23:case\"end\":return _context.stop();}}},_callee);}));return function placeBet(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"input-bet\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:placeBet,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"enter here to deposit\",value:inputValue,onChange:updateBet}),/*#__PURE__*/_jsx(\"button\",{onClick:placeBet,children:\"Insert Tokens\"})]}),/*#__PURE__*/_jsx(\"p\",{children:message})]});}","map":{"version":3,"sources":["C:/Users/Brandon/Desktop/FIN 6392 G3 P2 Workspace/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/placeBet.js"],"names":["useContext","ethers","useEffect","GlobalState","PlaceBet","currentGameInfo","setGameInfo","currentUserInfo","setCurrentUserInfo","signer","signerAddress","erc20","inputValue","balance","deck","player","dealer","message","updateBet","e","prev","target","value","placeBet","preventDefault","balanceOf","newBalance","String","currentBet","level","connect","transfer","utils","parseUnits"],"mappings":"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","sourcesContent":["import { useContext } from \"react\"\r\nimport { ethers } from \"ethers\"\r\nimport { useEffect } from \"react\"\r\nimport { GlobalState } from \"../../../../../global_states/global_state\"\r\n\r\n\r\nexport function PlaceBet() {\r\n    const { currentGameInfo, setGameInfo, currentUserInfo, setCurrentUserInfo } = useContext(GlobalState);\r\n    const signer = currentUserInfo.signer;\r\n    const signerAddress = currentUserInfo.signerAddress;\r\n    const erc20 = currentUserInfo.erc20;\r\n    const inputValue = currentGameInfo.inputValue;\r\n    const balance = currentUserInfo.balance;\r\n    var deck = currentGameInfo.deck;\r\n    var player = currentGameInfo.player;\r\n    var dealer = currentGameInfo.dealer;\r\n    var message = currentGameInfo.message;\r\n    \r\n    const updateBet = e => {\r\n        setGameInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    const placeBet = async (e) => {\r\n        e.preventDefault();\r\n        let newBalance = await erc20.balanceOf(signerAddress);\r\n            newBalance = String(newBalance);\r\n            if (newBalance != String(balance) || balance == \"-\") {\r\n                setCurrentUserInfo(prev => {\r\n                    return {\r\n                        ...prev,\r\n                        balance: newBalance\r\n                    }\r\n                })\r\n            }\r\n        const currentBet = currentGameInfo.inputValue;\r\n        if (currentBet % 10 != 0) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Must be divisble by 10\"\r\n                }\r\n            })\r\n        } else if (currentBet > balance) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Not enough BVJM tokens\"\r\n                }\r\n            });\r\n        } else if (currentBet == 0) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: \"freePlay\",\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n        } else {\r\n            await erc20.connect(signer).transfer(\"0xa00D2f69DaAF2DA3d4F7b5967230e8D1D0631211\", ethers.utils.parseUnits(currentBet, 18));\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: currentBet/10 - 1,\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    inputValue: null\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"input-bet\">\r\n            <form onSubmit={placeBet}>\r\n                <input type=\"text\" placeholder=\"enter here to deposit\" value={inputValue} onChange={updateBet}/>\r\n                <button onClick={placeBet}>Insert Tokens</button>\r\n            </form>\r\n            <p>{message}</p>\r\n        </div>\r\n        \r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}