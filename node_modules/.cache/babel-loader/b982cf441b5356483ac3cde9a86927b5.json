{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Brandon/Desktop/FinTechProjectWorkspace/blackjack-dapp/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"C:/Users/Brandon/Desktop/FinTechProjectWorkspace/blackjack-dapp/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _slicedToArray from \"C:/Users/Brandon/Desktop/FinTechProjectWorkspace/blackjack-dapp/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FinTechProjectWorkspace\\\\blackjack-dapp\\\\src\\\\App.js\",\n    _s = $RefreshSig$();\n\nimport _regeneratorRuntime from \"C:\\\\Users\\\\Brandon\\\\Desktop\\\\FinTechProjectWorkspace\\\\blackjack-dapp\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";\nimport { useState, useEffect } from \"react\";\nimport { ethers } from \"ethers\";\nimport erc20abi from \"./ERC20abi.json\";\nimport ErrorMessage from \"./ErrorMessage\";\nimport TxList from \"./TxList\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function App() {\n  _s();\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      txs = _useState2[0],\n      setTxs = _useState2[1];\n\n  var _useState3 = useState(),\n      _useState4 = _slicedToArray(_useState3, 2),\n      contractListened = _useState4[0],\n      setContractListened = _useState4[1];\n\n  var _useState5 = useState(),\n      _useState6 = _slicedToArray(_useState5, 2),\n      error = _useState6[0],\n      setError = _useState6[1];\n\n  var _useState7 = useState({\n    address: \"-\",\n    tokenName: \"-\",\n    tokenSymbol: \"-\",\n    totalSupply: \"-\"\n  }),\n      _useState8 = _slicedToArray(_useState7, 2),\n      contractInfo = _useState8[0],\n      setContractInfo = _useState8[1];\n\n  var _useState9 = useState({\n    address: \"-\",\n    balance: \"-\"\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      balanceInfo = _useState10[0],\n      setBalanceInfo = _useState10[1];\n\n  useEffect(function () {\n    if (contractInfo.address !== \"-\") {\n      var provider = new ethers.providers.Web3Provider(window.ethereum);\n      var erc20 = new ethers.Contract(contractInfo.address, erc20abi, provider);\n      erc20.on(\"Transfer\", function (from, to, amount, event) {\n        console.log({\n          from: from,\n          to: to,\n          amount: amount,\n          event: event\n        });\n        setTxs(function (currentTxs) {\n          return [].concat(_toConsumableArray(currentTxs), [{\n            txHash: event.transactionHash,\n            from: from,\n            to: to,\n            amount: String(amount)\n          }]);\n        });\n      });\n      setContractListened(erc20);\n      return function () {\n        contractListened.removeAllListeners();\n      };\n    }\n  }, [contractInfo.address]);\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var data, provider, erc20, tokenName, tokenSymbol, totalSupply;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              data = new FormData(e.target);\n              provider = new ethers.providers.Web3Provider(window.ethereum);\n              erc20 = new ethers.Contract(data.get(\"addr\"), erc20abi, provider);\n              _context.next = 6;\n              return erc20.name();\n\n            case 6:\n              tokenName = _context.sent;\n              _context.next = 9;\n              return erc20.symbol();\n\n            case 9:\n              tokenSymbol = _context.sent;\n              _context.next = 12;\n              return erc20.totalSupply();\n\n            case 12:\n              totalSupply = _context.sent;\n              setContractInfo({\n                address: data.get(\"addr\"),\n                tokenName: tokenName,\n                tokenSymbol: tokenSymbol,\n                totalSupply: totalSupply\n              });\n\n            case 14:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var getMyBalance = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n      var provider, erc20, signer, signerAddress, balance;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              provider = new ethers.providers.Web3Provider(window.ethereum);\n              _context2.next = 3;\n              return provider.send(\"eth_requestAccounts\", []);\n\n            case 3:\n              erc20 = new ethers.Contract(contractInfo.address, erc20abi, provider);\n              _context2.next = 6;\n              return provider.getSigner();\n\n            case 6:\n              signer = _context2.sent;\n              _context2.next = 9;\n              return signer.getAddress();\n\n            case 9:\n              signerAddress = _context2.sent;\n              _context2.next = 12;\n              return erc20.balanceOf(signerAddress);\n\n            case 12:\n              balance = _context2.sent;\n              setBalanceInfo({\n                address: signerAddress,\n                balance: String(balance)\n              });\n\n            case 14:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function getMyBalance() {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  var handleTransfer = /*#__PURE__*/function () {\n    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e) {\n      var data, provider, signer, erc20;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              e.preventDefault();\n              data = new FormData(e.target);\n              provider = new ethers.providers.Web3Provider(window.ethereum);\n              _context3.next = 5;\n              return provider.send(\"eth_requestAccounts\", []);\n\n            case 5:\n              _context3.next = 7;\n              return provider.getSigner();\n\n            case 7:\n              signer = _context3.sent;\n              erc20 = new ethers.Contract(contractInfo.address, erc20abi, signer);\n              _context3.next = 11;\n              return erc20.transfer(data.get(\"recipient\"), data.get(\"amount\"));\n\n            case 11:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    return function handleTransfer(_x2) {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-1 gap-2 md:grid-cols-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        className: \"m-4\",\n        onSubmit: handleSubmit,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\",\n          children: [/*#__PURE__*/_jsxDEV(\"main\", {\n            className: \"mt-4 p-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              className: \"text-xl font-semibold text-gray-700 text-center\",\n              children: \"Read from smart contract\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"my-3\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  name: \"addr\",\n                  className: \"input input-bordered block w-full focus:ring focus:outline-none\",\n                  placeholder: \"ERC20 contract address\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 106,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 105,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n            className: \"p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"btn btn-primary submit-button focus:ring focus:outline-none w-full\",\n              children: \"Get token info\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 116,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Name\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 128,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Symbol\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 129,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Total supply\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 130,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: contractInfo.tokenName\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 135,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: contractInfo.tokenSymbol\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 136,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: String(contractInfo.totalSupply)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: contractInfo.deployedAt\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: getMyBalance,\n              type: \"submit\",\n              className: \"btn btn-primary submit-button focus:ring focus:outline-none w-full\",\n              children: \"Get my balance\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 145,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"overflow-x-auto\",\n              children: /*#__PURE__*/_jsxDEV(\"table\", {\n                className: \"table w-full\",\n                children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Address\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 158,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                      children: \"Balance\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 159,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 157,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 156,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                  children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                      children: balanceInfo.address\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                      children: balanceInfo.balance\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 155,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 154,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 153,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-4 credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold text-gray-700 text-center\",\n            children: \"Write to contract\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleTransfer,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-3\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"recipient\",\n                className: \"input input-bordered block w-full focus:ring focus:outline-none\",\n                placeholder: \"Recipient address\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 181,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"my-3\",\n              children: /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"text\",\n                name: \"amount\",\n                className: \"input input-bordered block w-full focus:ring focus:outline-none\",\n                placeholder: \"Amount to transfer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 188,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"footer\", {\n              className: \"p-4\",\n              children: /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"btn btn-primary submit-button focus:ring focus:outline-none w-full\",\n                children: \"Transfer\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 197,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 196,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"m-4 credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-4 p-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"text-xl font-semibold text-gray-700 text-center\",\n            children: \"Recent transactions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 211,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: /*#__PURE__*/_jsxDEV(TxList, {\n              txs: txs\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 214,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"sujFOCxVg3r8eg1R6RIbmzYOzl8=\");\n\n_c = App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["C:/Users/Brandon/Desktop/FinTechProjectWorkspace/blackjack-dapp/src/App.js"],"names":["useState","useEffect","ethers","erc20abi","ErrorMessage","TxList","App","txs","setTxs","contractListened","setContractListened","error","setError","address","tokenName","tokenSymbol","totalSupply","contractInfo","setContractInfo","balance","balanceInfo","setBalanceInfo","provider","providers","Web3Provider","window","ethereum","erc20","Contract","on","from","to","amount","event","console","log","currentTxs","txHash","transactionHash","String","removeAllListeners","handleSubmit","e","preventDefault","data","FormData","target","get","name","symbol","getMyBalance","send","getSigner","signer","getAddress","signerAddress","balanceOf","handleTransfer","transfer","deployedAt"],"mappings":"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","sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { ethers } from \"ethers\";\r\nimport erc20abi from \"./ERC20abi.json\";\r\nimport ErrorMessage from \"./ErrorMessage\";\r\nimport TxList from \"./TxList\";\r\n\r\nexport default function App() {\r\n  const [txs, setTxs] = useState([]);\r\n  const [contractListened, setContractListened] = useState();\r\n  const [error, setError] = useState();\r\n  const [contractInfo, setContractInfo] = useState({\r\n    address: \"-\",\r\n    tokenName: \"-\",\r\n    tokenSymbol: \"-\",\r\n    totalSupply: \"-\"\r\n  });\r\n  const [balanceInfo, setBalanceInfo] = useState({\r\n    address: \"-\",\r\n    balance: \"-\"\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (contractInfo.address !== \"-\") {\r\n      const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n      const erc20 = new ethers.Contract(\r\n        contractInfo.address,\r\n        erc20abi,\r\n        provider\r\n      );\r\n\r\n      erc20.on(\"Transfer\", (from, to, amount, event) => {\r\n        console.log({ from, to, amount, event });\r\n\r\n        setTxs((currentTxs) => [\r\n          ...currentTxs,\r\n          {\r\n            txHash: event.transactionHash,\r\n            from,\r\n            to,\r\n            amount: String(amount)\r\n          }\r\n        ]);\r\n      });\r\n      setContractListened(erc20);\r\n\r\n      return () => {\r\n        contractListened.removeAllListeners();\r\n      };\r\n    }\r\n  }, [contractInfo.address]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData(e.target);\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n\r\n    const erc20 = new ethers.Contract(data.get(\"addr\"), erc20abi, provider);\r\n\r\n    const tokenName = await erc20.name();\r\n    const tokenSymbol = await erc20.symbol();\r\n    const totalSupply = await erc20.totalSupply();\r\n\r\n    setContractInfo({\r\n      address: data.get(\"addr\"),\r\n      tokenName,\r\n      tokenSymbol,\r\n      totalSupply\r\n    });\r\n  };\r\n\r\n  const getMyBalance = async () => {\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n    await provider.send(\"eth_requestAccounts\", []);\r\n    const erc20 = new ethers.Contract(contractInfo.address, erc20abi, provider);\r\n    const signer = await provider.getSigner();\r\n    const signerAddress = await signer.getAddress();\r\n    const balance = await erc20.balanceOf(signerAddress);\r\n\r\n    setBalanceInfo({\r\n      address: signerAddress,\r\n      balance: String(balance)\r\n    });\r\n  };\r\n\r\n  const handleTransfer = async (e) => {\r\n    e.preventDefault();\r\n    const data = new FormData(e.target);\r\n    const provider = new ethers.providers.Web3Provider(window.ethereum);\r\n    await provider.send(\"eth_requestAccounts\", []);\r\n    const signer = await provider.getSigner();\r\n    const erc20 = new ethers.Contract(contractInfo.address, erc20abi, signer);\r\n    await erc20.transfer(data.get(\"recipient\"), data.get(\"amount\"));\r\n  };\r\n\r\n  return (\r\n    <div className=\"grid grid-cols-1 gap-2 md:grid-cols-2\">\r\n      <div>\r\n        <form className=\"m-4\" onSubmit={handleSubmit}>\r\n          <div className=\"credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\">\r\n            <main className=\"mt-4 p-4\">\r\n              <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\r\n                Read from smart contract\r\n              </h1>\r\n              <div className=\"\">\r\n                <div className=\"my-3\">\r\n                  <input\r\n                    type=\"text\"\r\n                    name=\"addr\"\r\n                    className=\"input input-bordered block w-full focus:ring focus:outline-none\"\r\n                    placeholder=\"ERC20 contract address\"\r\n                  />\r\n                </div>\r\n              </div>\r\n            </main>\r\n            <footer className=\"p-4\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\r\n              >\r\n                Get token info\r\n              </button>\r\n            </footer>\r\n            <div className=\"px-4\">\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"table w-full\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Name</th>\r\n                      <th>Symbol</th>\r\n                      <th>Total supply</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <th>{contractInfo.tokenName}</th>\r\n                      <td>{contractInfo.tokenSymbol}</td>\r\n                      <td>{String(contractInfo.totalSupply)}</td>\r\n                      <td>{contractInfo.deployedAt}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n            <div className=\"p-4\">\r\n              <button\r\n                onClick={getMyBalance}\r\n                type=\"submit\"\r\n                className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\r\n              >\r\n                Get my balance\r\n              </button>\r\n            </div>\r\n            <div className=\"px-4\">\r\n              <div className=\"overflow-x-auto\">\r\n                <table className=\"table w-full\">\r\n                  <thead>\r\n                    <tr>\r\n                      <th>Address</th>\r\n                      <th>Balance</th>\r\n                    </tr>\r\n                  </thead>\r\n                  <tbody>\r\n                    <tr>\r\n                      <th>{balanceInfo.address}</th>\r\n                      <td>{balanceInfo.balance}</td>\r\n                    </tr>\r\n                  </tbody>\r\n                </table>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </form>\r\n        <div className=\"m-4 credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\">\r\n          <div className=\"mt-4 p-4\">\r\n            <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\r\n              Write to contract\r\n            </h1>\r\n\r\n            <form onSubmit={handleTransfer}>\r\n              <div className=\"my-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"recipient\"\r\n                  className=\"input input-bordered block w-full focus:ring focus:outline-none\"\r\n                  placeholder=\"Recipient address\"\r\n                />\r\n              </div>\r\n              <div className=\"my-3\">\r\n                <input\r\n                  type=\"text\"\r\n                  name=\"amount\"\r\n                  className=\"input input-bordered block w-full focus:ring focus:outline-none\"\r\n                  placeholder=\"Amount to transfer\"\r\n                />\r\n              </div>\r\n              <footer className=\"p-4\">\r\n                <button\r\n                  type=\"submit\"\r\n                  className=\"btn btn-primary submit-button focus:ring focus:outline-none w-full\"\r\n                >\r\n                  Transfer\r\n                </button>\r\n              </footer>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div>\r\n        <div className=\"m-4 credit-card w-full lg:w-3/4 sm:w-auto shadow-lg mx-auto rounded-xl bg-white\">\r\n          <div className=\"mt-4 p-4\">\r\n            <h1 className=\"text-xl font-semibold text-gray-700 text-center\">\r\n              Recent transactions\r\n            </h1>\r\n            <p>\r\n              <TxList txs={txs} />\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}