{"ast":null,"code":"import{useContext}from\"react\";import{ethers}from\"ethers\";import{useEffect}from\"react\";import{GlobalState}from\"../../../../../global_states/global_state\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export function PlaceBet(){const{currentGameInfo,setGameInfo,currentUserInfo,setCurrentUserInfo}=useContext(GlobalState);const signer=currentUserInfo.signer;const signerAddress=currentUserInfo.signerAddress;const erc20=currentUserInfo.erc20;const inputValue=currentGameInfo.inputValue;const balance=currentUserInfo.balance;const cards=currentGameInfo.cards;var deck=currentGameInfo.deck;var player=currentGameInfo.player;var dealer=currentGameInfo.dealer;var message=currentGameInfo.message;const updateBet=e=>{setGameInfo(prev=>{return{...prev,inputValue:e.target.value};});};const placeBet=async e=>{e.preventDefault();let newBalance=await erc20.balanceOf(signerAddress);newBalance=String(newBalance);if(newBalance!=String(balance)||balance==\"-\"){setCurrentUserInfo(prev=>{return{...prev,balance:newBalance};});}const currentBet=currentGameInfo.inputValue;if(currentBet%10!=0){setGameInfo(prev=>{return{...prev,message:\"Must be divisble by 10\"};});}else if(currentBet>balance){setGameInfo(prev=>{return{...prev,message:\"Not enough KBUX\"};});}else if(currentBet==0||currentBet===null){setGameInfo(prev=>{return{...prev,currentBet:\"freePlay\",level:1,message:null};});}else{await erc20.connect(signer).transfer(\"0xe1c85AeeEDc1bE0492B4bd70Ad512058aCdB0bA2\",ethers.utils.parseUnits(currentBet,18));setGameInfo(prev=>{return{...prev,currentBet:currentBet/10-1,level:1,message:null};});setGameInfo(prev=>{return{...prev,inputValue:null};});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"input-bet\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:placeBet,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"enter here to deposit\",value:inputValue,onChange:updateBet}),/*#__PURE__*/_jsx(\"button\",{onClick:placeBet,children:\"Insert Tokens\"})]}),/*#__PURE__*/_jsx(\"p\",{children:message})]});}","map":{"version":3,"names":["useContext","ethers","useEffect","GlobalState","jsx","_jsx","jsxs","_jsxs","PlaceBet","currentGameInfo","setGameInfo","currentUserInfo","setCurrentUserInfo","signer","signerAddress","erc20","inputValue","balance","cards","deck","player","dealer","message","updateBet","e","prev","target","value","placeBet","preventDefault","newBalance","balanceOf","String","currentBet","level","connect","transfer","utils","parseUnits","className","children","onSubmit","type","placeholder","onChange","onClick"],"sources":["C:/Users/Brandon/Projects/3x3-monte-dapp/src/components/pages/start_page_comp/base_selector_comp/game_selector_comp/pregame_comp/placeBet.js"],"sourcesContent":["import { useContext } from \"react\"\r\nimport { ethers } from \"ethers\"\r\nimport { useEffect } from \"react\"\r\nimport { GlobalState } from \"../../../../../global_states/global_state\"\r\n\r\n\r\nexport function PlaceBet() {\r\n    const { currentGameInfo, setGameInfo, currentUserInfo, setCurrentUserInfo } = useContext(GlobalState);\r\n    const signer = currentUserInfo.signer;\r\n    const signerAddress = currentUserInfo.signerAddress;\r\n    const erc20 = currentUserInfo.erc20;\r\n    const inputValue = currentGameInfo.inputValue;\r\n    const balance = currentUserInfo.balance;\r\n    const cards = currentGameInfo.cards;\r\n    var deck = currentGameInfo.deck;\r\n    var player = currentGameInfo.player;\r\n    var dealer = currentGameInfo.dealer;\r\n    var message = currentGameInfo.message;\r\n    \r\n    const updateBet = e => {\r\n        setGameInfo(prev => {\r\n            return {\r\n                ...prev,\r\n                inputValue: e.target.value\r\n            }\r\n        })\r\n    }\r\n\r\n    const placeBet = async (e) => {\r\n        e.preventDefault();\r\n        let newBalance = await erc20.balanceOf(signerAddress);\r\n            newBalance = String(newBalance);\r\n            if (newBalance != String(balance) || balance == \"-\") {\r\n                setCurrentUserInfo(prev => {\r\n                    return {\r\n                        ...prev,\r\n                        balance: newBalance\r\n                    }\r\n                })\r\n            }\r\n        const currentBet = currentGameInfo.inputValue;\r\n        if (currentBet % 10 != 0) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Must be divisble by 10\"\r\n                }\r\n            })\r\n        } else if (currentBet > balance) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    message: \"Not enough KBUX\"\r\n                }\r\n            });\r\n        } else if (currentBet == 0 || currentBet === null) {\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: \"freePlay\",\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n        } else {\r\n            await erc20.connect(signer).transfer(\"0xe1c85AeeEDc1bE0492B4bd70Ad512058aCdB0bA2\", ethers.utils.parseUnits(currentBet, 18));\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    currentBet: currentBet/10 - 1,\r\n                    level: 1,\r\n                    message: null\r\n                }\r\n            });\r\n            setGameInfo(prev => {\r\n                return {\r\n                    ...prev,\r\n                    inputValue: null\r\n                }\r\n            });\r\n        }\r\n    }\r\n    return (\r\n        <div className=\"input-bet\">\r\n            <form onSubmit={placeBet}>\r\n                <input type=\"text\" placeholder=\"enter here to deposit\" value={inputValue} onChange={updateBet}/>\r\n                <button onClick={placeBet}>Insert Tokens</button>\r\n            </form>\r\n            <p>{message}</p>\r\n        </div>\r\n        \r\n    )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}